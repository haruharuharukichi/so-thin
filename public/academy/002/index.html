<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8n">
	<meta name="Description" CONTENT="ここにページのディスクリプション">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Haruki Kawashita">
	<meta name="robots" content="noindex">
	<meta name="robots" content="nofollow">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>soThin</title>
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,900" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

	
	<script type="text/javascript" src="https://haruharuharukichi.github.io/so-thin/js/prettify.js"></script>
	<link href="https://haruharuharukichi.github.io/so-thin/css/prettify.css" type="text/css" rel="stylesheet">

	
	<link rel="stylesheet" href="https://haruharuharukichi.github.io/so-thin/css/iota.css" />

	<link rel="stylesheet" href="https://haruharuharukichi.github.io/so-thin/style.css">
</head>

<body onload="prettyPrint()">
	<nav role="navigation" id="globalNavi" class="grid inline-center navbar_wrapper sticky">
		<a href="https://haruharuharukichi.github.io/so-thin/" rel="home" class="flex navbar_brand">
			<span class="navbar_logo">
				LO<br>GO
			</span>
		</a>
		<button type="button" id="navbarToggler" class="navbar_toggler">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<ul class="navbar_list font-sm">
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/">home</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/todo">やりたいこと</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/naming">命名規則</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/flow">全体の流れ</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/install">WP入れ方</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/function">function</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/plugin">plugin</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/material">素材</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/salary">給与</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/templates/">テンプレ</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/components/">コンポーネント</a></li>
			<li><a class="navbar_link" href="https://haruharuharukichi.github.io/so-thin/academy/">草進ハイスクール</a></li>
		</ul>
	</nav>
	<div class="grid body_wrapper">
<aside role="complementary" class="sidebar_wrapper">
    <h3>コンポーネント</h3>
    
    <ul>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/">TOP</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/button/">Button</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/card/">Card</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/form/">Form</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/grid/">Grid</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/header/">Header</a>
        </li>
        
        <li>
            <a href="https://haruharuharukichi.github.io/so-thin/components/navigation/">Navigation</a>
        </li>
        
    </ul>
    
</aside>
<aside role="complementary" class="sidebar_wrapper">
    <div id="toc"></div>
</aside>
<main role="main">
    

<h1 id="マインドマップの使い方とテーマの作成方法">マインドマップの使い方とテーマの作成方法</h1>

<h2 id="今回の目的">今回の目的</h2>

<ul>
<li>マインドマップでサイトマップを作れるようになる</li>
<li>WordPressテーマの作り方（流れ）を理解できる・作れる</li>
</ul>

<h2 id="マイントマップ">マイントマップ</h2>

<p>サイトマップは原則マインドマップで作成する<br />
理由はユーザーフローが分かり易いから</p>

<p>マインドマップとは、地図みたいなもの<br />
<img src="https://haruharuharukichi.github.io/so-thin/images/002_001.jpg" alt="マインドマップ" /></p>

<h3 id="使い方">使い方</h3>

<ol>
<li><a href="http://jp.xmind.net/download/">http://jp.xmind.net/download/</a> からソフトをDL</li>
<li><a href="https://haruharuharukichi.github.io/so-thin/images/sitemap.xmind">https://haruharuharukichi.github.io/so-thin/images/sitemap.xmind</a> でテンプレをDL</li>
<li>テンプレファイルを開いていじる</li>
</ol>

<p>大体の要素は右クリックかダブルクリックで変更できる</p>

<h4 id="サブ">サブ</h4>

<p>【セクション1 ex.】みたいなのを追加する場合は、一番大きい中心トピックを右クリックし、挿入→サブトピック</p>

<h4 id="ラベル">ラベル</h4>

<p>「目的：」の部分は親要素の右クリックから挿入→ラベル</p>

<h4 id="矢印">矢印</h4>

<p>要素を繋げる矢印を書く場合は、右クリック→挿入→関連<br />
文字を入れる時はダブルクリック</p>

<p>以上。<br />
本当に簡単なので、各自いじってみよう</p>

<h2 id="テーマ作成">テーマ作成</h2>

<p>HTMLからWordPressテーマに落とし込む方法</p>

<h3 id="構造">構造</h3>

<p><img src="https://haruharuharukichi.github.io/so-thin/images/002_002.jpg" alt="マインドマップ" /><br />
<a href="https://wpdocs.osdn.jp/%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%9A%8E%E5%B1%A4">公式解説</a></p>

<h3 id="html作成">HTML作成</h3>

<p>なにはともあれ、HTMLが無いとお話しにならないので作りましょう。</p>

<h4 id="トップページ">トップページ</h4>

<p>まずデザインのベースになるトップページをつくります<br />
この時のフォルダ構造(lib以下は任意)</p>

<p>root<br />
|-index.html<br />
|-style.css<br />
|-lib<br />
  |-images<br />
  |-css<br />
  |-js</p>

<h4 id="固定ページ">固定ページ</h4>

<p>次に、トップページのデザインに合わせて固定ページデザインを１つ以上つくります<br />
規模が大きい時は予め幾つか用意したりする<br />
固定ページのテンプレートを増やしても基本めんどくささしかないので、たいていの場合大枠用テンプレート一つ+中身はページごとに変える<br />
ガワは同じで中身だけ変えるイメージ<br />
この時のフォルダ構造(lib以下は(ry</p>

<p>root<br />
|-index.html<br />
|-page.html<br />
|-style.css<br />
|-lib<br />
  |-images<br />
  |-css<br />
  |-js</p>

<h4 id="投稿ページ">投稿ページ</h4>

<p>ブログ機能を付ける場合でもつけない場合でも、とりあえず投稿ページ用デザインも作っておく<br />
中身は適当だけど、見出し５くらいまではデザインを作っておいて
どうせその内ブログ機能も付けたいとか言い出すから。<br />
この時のフォルダ構造(ry</p>

<p>root<br />
|-index.html<br />
|-page.html<br />
|-post.html<br />
|-style.css<br />
|-lib<br />
  |-images<br />
  |-css<br />
  |-js</p>

<h4 id="同じクラス名でもページごとにデザインを変える方法">同じクラス名でもページごとにデザインを変える方法</h4>

<p>同じmain_cardクラスを使ってても、indexとpageとsingleでデザインを分けたい場合は、WPの関数を使う</p>

<p><code>&lt;?php  body_class(''); ?&gt;</code>をテーマのbodyタグに付けておけば、ページの種類によって異なるクラスを出力してくれる</p>

<ul>
<li>トップページならhome</li>
<li>固定ページならpage</li>
<li>投稿ページならsingle</li>
<li>アーカイブ（記事一覧）ならarchive</li>
<li>カテゴリ一覧ならarchive category</li>
<li>日付ごとならdate</li>
</ul>

<p>など<br />
これに合わせて、HTMLファイル作成の際に手動で<code>&lt;body class=&quot;home&quot;&gt;</code>とかしておけばHTML作成の段階から確認しながら作業できる</p>

<h3 id="wpテーマ化">WPテーマ化</h3>

<p>アンカーのリンク先貼り直し、phpファイル内での画像読み込みの参照先貼り直しを忘れずに</p>

<pre><code class="language-php">//これはダメ
&lt;a href=&quot;./index.html&quot; rel=&quot;home&quot;&gt;
    アンカー
&lt;/a&gt;
//これはOK
&lt;a href=&quot;&lt;?= esc_url( home_url( '/' ) ); ?&gt;&quot; rel=&quot;home&quot;&gt;
    アンカー
&lt;/a&gt;
//これはダメ
&lt;img src=&quot;./lib/images/header_img.jpg&quot;&gt;
//これはOK
&lt;img src=&quot;&lt;?= get_theme_file_uri();?&gt;/lib/images/header_img.jpg&quot;&gt;
//けどこれはOK（CSSで読み込みが行われるから）
&lt;div style=&quot;background-image: url(./lib/images/header_img.jpg)&quot;&gt;&lt;/div&gt;
</code></pre>

<h4 id="seo対策">SEO対策</h4>

<p>構造化データというものを使うと、SEO対策で上手く働くことがある。<br />
現在Googleさんが力を入れているのが、schema.orgというもの</p>

<pre><code class="language-php">//投稿データ
&lt;article itemscope itemtype=&quot;https://schema.org/BlogPosting&quot;&gt;
	&lt;h1 itemprop=&quot;headline&quot;&gt;タイトル&lt;/h1&gt;
    &lt;time itemprop=&quot;dateCreated datePublished&quot; datetime=&quot;&lt;?php the_time('c') ?&gt;&quot;&gt;&lt;?php the_time('Y/m/j') ?&gt;&lt;/time&gt;
    &lt;time itemprop=&quot;dateModified&quot; datetime=&quot;&lt;?php the_modified_time('c'); ?&gt;&quot;&gt;&lt;?php the_modified_time('Y/m/j'); ?&gt;&lt;/time&gt;
	&lt;div itemprop=&quot;articleBody&quot;&gt;&lt;?php the_content(); ?&gt;&lt;/div&gt;
&lt;/article&gt;
</code></pre>

<h4 id="style-css-libフォルダ">style.css&amp;libフォルダ</h4>

<p>一番楽なことからやりましょう。<br />
まずはstyle.cssとlibフォルダをそのままコピペ。<br />
style.cssの最上部に以下を張り付けて編集（これが無いとテーマとして認識されない）<br />
Theme Nameさえ設定しとけばあとは何とかなる。</p>

<pre><code class="language-css">/*
Theme Name: テーマ名
Theme URI: http://example.com/
Description: 
Version: 1.0
Author: Saw So Thin | 自分の名前
Author URI: https://sothin.github.io
*/
</code></pre>

<h4 id="header-php">header.php</h4>

<p>大体いっつも最初はheader.phpからいじる。<br />
まずは、テーマでの共通部分（大体headerタグまで）を移し替える。<br />
その後ファイル読み込みをfunction.phpに移行、リンクの張替えやメニューの入れ替えなどをする（baseテーマなら最低限の準備をしてあるのでお勧め）</p>

<pre><code class="language-.php">&lt;?php
/**
 * ヘッダー表示用
 *
 * @package WordPress
 * @subpackage テーマ名
 * @since 1.0
 * @version 1.0
 */
?&gt;
&lt;!DOCTYPE html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8N&quot;&gt;
    &lt;meta name=&quot;author&quot; content=&quot;Saw So Thin | 自分の名前&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;
    &lt;?php wp_head(); ?&gt;
&lt;/head&gt;
&lt;body &lt;?php  body_class(&quot;hfeed&quot;); ?&gt; &gt;
    &lt;nav role=&quot;navigation&quot; id=&quot;navbar&quot; class=&quot;grid navbar_wrapper&quot;&gt;
        &lt;a href=&quot;&lt;?php echo esc_url( home_url( '/' ) ); ?&gt;&quot; rel=&quot;home&quot; class=&quot;flex navbar_brand&quot;&gt;
            &lt;span class=&quot;navbar_logo&quot; style=&quot;background-image: url(&lt;?php $logo = get_theme_mod( 'custom_logo' );
            echo wp_get_attachment_url( $logo ); ?&gt; )&quot;&gt;&lt;/span&gt;
        &lt;/a&gt;        
        &lt;button type=&quot;button&quot; id=&quot;navbarToggler&quot; class=&quot;navbar_toggler&quot;&gt;
            &lt;span&gt;&lt;/span&gt;
            &lt;span&gt;&lt;/span&gt;
            &lt;span&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;?php wp_nav_menu( array(
            'theme_location'=&gt;'Navigation', 
            'container'     =&gt;'', 
            'menu_class'    =&gt;'',
            'items_wrap'    =&gt;'&lt;ul class=&quot;navbar_list&quot;&gt;%3$s&lt;/ul&gt;'));
            ?&gt;
    &lt;/nav&gt;
    &lt;header role=&quot;banner&quot; id=&quot;header&quot; class=&quot;flex Inview header_wrapper&quot;&gt;
        &lt;h1 class=&quot;entry-title header_title&quot;&gt;
            &lt;?php 
            switch (true) {
                case is_home():
                    bloginfo( 'name' );
                    break;

                case is_archive():
                    the_archive_title();
                    break;

                case is_search():
                    printf( __( '「%s」の検索結果'), '&lt;span&gt;' . get_search_query() . '&lt;/span&gt;' );
                    break;

                case is_404():
                    見つかりませんでした
                    break;

                case is_singular():
                default:
                    the_title();
                    break;
            } ?&gt;
        &lt;/h1&gt;
    &lt;/header&gt;
</code></pre>

<h4 id="index-php">index.php</h4>

<p>ないとヤヴァイのでまず作る<br />
home.phpと分けても良いが、面倒なので基本トップページ用の記述はここに入れる</p>

<h4 id="functions-php">functions.php</h4>

<p>次にfunction.phpに必要な記述を入れる。<br />
一から全部探すのは面倒なので、baseテーマからの引用か、FUNCTIONページの参照を推奨<br />
現時点での最最最最最最最低限は以下</p>

<pre><code class="language-php">//タイトル追加
function my_setup_theme() {
    add_theme_support( 'title-tag' );
}
add_action( 'after_setup_theme', 'my_setup_theme' );


//navigationの登録
register_nav_menu( 'Navigation', 'ナビゲーション' );


//カスタムヘッダー追加
add_theme_support('custom-header');


//サムネイル追加
add_theme_support('post-thumbnails'); 


//カスタムロゴ追加
add_theme_support( 'custom-logo', array( 'size' =&gt; 'raindrops-logo' ) );


//ナビゲーションのアンカータグにクラスを追加
function add_menuclass($ulclass) {
return preg_replace('/&lt;a /', '&lt;a class=&quot;navbar_link&quot;', $ulclass);
}
add_filter('wp_nav_menu','add_menuclass');


// クラスを編集して、ナビゲーション表示中メニューに 'current' クラスを付与する
add_filter( 'nav_menu_css_class', 'remove_to_currentClass', 10, 2 );
function remove_to_currentClass( $classes, $item ) {
    $classes = array('');
    if( $item -&gt; current == true ) {
        $classes[] = 'current';
    }
    return $classes;
}


//wp_enqueue_script/styleを使ったファイル読み込み
if (!is_admin()) {
    function deregister_script(){  //　登録解除の項目
        wp_deregister_script('jquery');
    }
    function register_files(){  //　登録の項目
        wp_register_script('jquery', 'https://code.jquery.com/jquery-3.3.1.min.js', false, '3.3.1', false );
        wp_register_script( 'main', get_theme_file_uri() .'/lib/js/main.js', array( 'jquery' ), '', true);
        wp_register_style( 'iota', get_theme_file_uri() .'/lib/css/iota.css', array(), '', false);
        wp_register_style( 'style', get_theme_file_uri() .'/style.css', array(), '', false);
    }
    function add_files() {  // 装備の項目
        //deregister_script();
        register_files();
        wp_enqueue_script('jquery');
        wp_enqueue_script('main');
        wp_enqueue_style('iota');
        wp_enqueue_style('style');
    }
    add_action('wp_enqueue_scripts', 'add_files');
}
</code></pre>

<h4 id="footer-php">footer.php</h4>

<p>次はいっつもほとんどやることが無いフッターを作る<br />
コピペしてちょっと修正して終わり<br />
注意点としては、bodyタグが終わる直前に<code>wp_footer()</code>を入れる事<br />
フッターに入れる内容は変更したくなる可能性もあるので、ウィジェットとして登録しておくのがキチ</p>

<pre><code class="language-php">&lt;?php
/**
 * フッター表示用
 *
 * @package WordPress
 * @subpackage テーマ名
 * @since 1.0
 * @version 1.0
 */
?&gt;
&lt;footer role=&quot;contentinfo&quot; id=&quot;footer&quot; class=&quot;footer_wrapper&quot;&gt;
	&lt;?php dynamic_sidebar('footer'); ?&gt;
&lt;/footer&gt;
&lt;?php wp_footer(); ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>これでひとまずindexページだけは見れる筈だから、アクセスして確認してみよう</p>

<h4 id="page-php">page.php</h4>

<p>お次は固定ページのカスタマイズ<br />
ガワの部分を作り上げよう</p>

<pre><code class="language-php">&lt;?php
/**
 * 固定ページ表示用
 *
 * @package WordPress
 * @subpackage テーマ名
 * @since 1.0
 * @version 1.0
 */
get_header(); 
while ( have_posts() ) :
    the_post(); ?&gt;
    &lt;article itemscope itemtype=&quot;https://schema.org/BlogPosting&quot;&gt;
        &lt;h1 itemprop=&quot;headline&quot;&gt;タイトル&lt;/h1&gt;
        &lt;time itemprop=&quot;dateCreated datePublished&quot; datetime=&quot;&lt;?php the_modified_time('c'); ?&gt;&quot;&gt;&lt;?php the_modified_time('Y/m/j'); ?&gt;&lt;/time&gt;
        &lt;time itemprop=&quot;dateModified&quot; datetime=&quot;&lt;?php the_time('c') ?&gt;&quot;&gt;&lt;?php the_time('Y/m/j') ?&gt;&lt;/time&gt;
        &lt;div itemprop=&quot;articleBody&quot;&gt;&lt;?php the_content(); ?&gt;&lt;/div&gt;
    &lt;/article&gt;
    &lt;?php
	endwhile; // End of the loop.
    get_sidebar();
    get_footer();
</code></pre>

<h4 id="固定ページテンプレート作成">固定ページテンプレート作成</h4>

<p>以下を付けると固定ページ編集画面からテンプレートとして選択できるようになる<br />
記事一覧ページなどに使おう</p>

<pre><code class="language-php">&lt;?php
/*
Template Name: name
*/
</code></pre>

<h4 id="single-php">single.php</h4>

<p>投稿ページ表示用<br />
だいたい固定ページと同じ。<br />
最近はWPも進化して、singular.phpだけ作ると固定ページも投稿ページもそれだけで表示できるようになった。鬼便利。</p>

<h4 id="archive-php">archive.php</h4>

<p>忘れそうで忘れてはいけないのがアーカイブページ<br />
カテゴリも日付もタグも、○○別記事一覧ページはだいたいアーカイブで表示できる</p>

<pre><code class="language-php">&lt;?php
/**
 * アーカイブページ表示用
 *
 * @package WordPress
 * @subpackage テーマ名
 * @since 1.0
 * @version 1.0
 */
get_header(); 
 ?&gt;
	&lt;main role=&quot;main&quot; id=&quot;main&quot;&gt;
			&lt;?php if ( have_posts() ) : 

				while ( have_posts() ) :
					the_post();

					get_template_part('content');

				endwhile;

			global $wp_query;
			wp_pagination(get_query_var('paged'),$wp_query-&gt;max_num_pages);
			
			else :
				get_template_part('notFound');
			endif; ?&gt;
	&lt;/main&gt;&lt;!-- #main --&gt;
&lt;?php
get_sidebar();
get_footer();
</code></pre>

<h4 id="content-php-notfound-php">content.php&amp;notFound.php</h4>

<p>必須じゃないけどあると便利なテンプレパーツ<br />
記事一覧で使いまわしたり見つかりませんページで表示したりできる。ファイル名は任意（予約語はダメ）。<br />
呼び出す時は<code>get_template_part('拡張子抜きのファイル名');</code>でOK</p>

<h4 id="その他">その他</h4>

<p>あとはあんま使わないけどあると便利だよね・あった方がいいよねページを作っておく</p>

<ul>
<li>screenshot.png(880*660pxでテーマのイメージ画像)</li>
<li>404.php</li>
<li>search.php</li>
<li>searchform.php</li>
<li>sidebar.php(サイドバーつくらないんだったらいらない)</li>
</ul>

<h4 id="整理整頓-チェック">整理整頓＆チェック</h4>

<p>そのまま。<br />
CSS・ファイル構造の整理整頓、要らないコードやファイルの削除など。<br />
あと忘れがちなのがブラウザ・デバイスチェック<br />
IEはお許しが出たら捨てましょう。</p>

<p>以下主要ブラウザ</p>

<ul>
<li>Chrome</li>
<li>FireFox</li>
<li>Edge</li>
<li>Safari</li>
<li>IE11</li>
<li>Opera</li>
</ul>

<p>以下要チェックデバイス</p>

<ul>
<li>iPhoneSE(最小デバイスの為)</li>
<li>iPad</li>
<li>iPadPro</li>
<li>1200px * 750px(サイズ指定)</li>
<li>1980px * 1000px</li>
</ul>

</main>
<footer role="contentinfo" class="inline-center footer_wrapper">@2019~ haruki kawashita</footer>
</div>
<script type='text/javascript' src='https://haruharuharukichi.github.io/so-thin/js/toc.min.js'></script>
<script type='text/javascript' src='https://haruharuharukichi.github.io/so-thin/js/main.js'></script>
</body>

</html>